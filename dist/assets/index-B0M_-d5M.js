const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Dashboard-CbBb_dqt.js","./LockGrid-Dy7NYaax.js","./vendor-s0BuhqT6.js","./utils-B3c4Ll7F.js","./LockGrid-BvGofCZL.css","./Dashboard-DmoHAZNJ.css","./Login-BTpgVdM4.js","./Login-C_35MHLB.css","./Locks-BbtFnngy.js","./Locks-BRI297nu.css","./Users-D7R8u1RN.js","./Users-BVivSyMA.css","./Settings-BR0qH0FR.js","./Settings-Bh_gv8MI.css"])))=>i.map(i=>d[i]);
import{z as R,A as y,B as I,C as B,D as T,E as $,l as V,c as E,v as h,f as t,y as v,w,n as A,b as C,e as N,g as k,u as p,h as L,G as q,R as U,p as M,H as z}from"./vendor-s0BuhqT6.js";import{s as H}from"./utils-B3c4Ll7F.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();const j="modulepreload",F=function(s,n){return new URL(s,n).href},P={},b=function(n,r,c){let o=Promise.resolve();if(r&&r.length>0){let e=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),m=a?.nonce||a?.getAttribute("nonce");o=e(r.map(u=>{if(u=F(u,c),u in P)return;P[u]=!0;const d=u.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(c)for(let _=i.length-1;_>=0;_--){const S=i[_];if(S.href===u&&(!d||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${g}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":j,d||(f.as="script"),f.crossOrigin="",f.href=u,m&&f.setAttribute("nonce",m),document.head.appendChild(f),d)return new Promise((_,S)=>{f.addEventListener("load",_),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function l(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&l(a.reason);return n().catch(l)})},D=R("auth",()=>{const s=y(null),n=y(localStorage.getItem("token")),r=I(()=>!!n.value);return{user:s,token:n,isAuthenticated:r,hasRole:a=>s.value?.role===a||s.value?.role==="admin",login:async a=>new Promise(m=>{setTimeout(()=>{if(a.username==="admin"&&a.password==="admin"){const e={id:1,username:"admin",email:"admin@smartlock.com",role:"admin",name:"System Administrator"},u="mock-jwt-token-"+Date.now();s.value=e,n.value=u,localStorage.setItem("token",u),localStorage.setItem("user",JSON.stringify(e)),m({success:!0,user:e})}else m({success:!1,message:"Invalid credentials"})},1e3)}),logout:()=>{s.value=null,n.value=null,localStorage.removeItem("token"),localStorage.removeItem("user")},checkAuth:()=>{const a=localStorage.getItem("token"),m=localStorage.getItem("user");a&&m&&(n.value=a,s.value=JSON.parse(m))}}}),G=[{path:"/",name:"Dashboard",component:()=>b(()=>import("./Dashboard-CbBb_dqt.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:()=>b(()=>import("./Login-BTpgVdM4.js"),__vite__mapDeps([6,2,3,7]),import.meta.url),meta:{guest:!0}},{path:"/locks",name:"Locks",component:()=>b(()=>import("./Locks-BbtFnngy.js"),__vite__mapDeps([8,2,1,3,4,9]),import.meta.url),meta:{requiresAuth:!0}},{path:"/users",name:"Users",component:()=>b(()=>import("./Users-D7R8u1RN.js"),__vite__mapDeps([10,2,3,11]),import.meta.url),meta:{requiresAuth:!0,role:"admin"}},{path:"/settings",name:"Settings",component:()=>b(()=>import("./Settings-BR0qH0FR.js"),__vite__mapDeps([12,2,3,13]),import.meta.url),meta:{requiresAuth:!0}}],x=B({history:T(),routes:G});x.beforeEach((s,n,r)=>{const c=D();s.meta.requiresAuth&&!c.isAuthenticated?r("/login"):s.meta.guest&&c.isAuthenticated||s.meta.role&&!c.hasRole(s.meta.role)?r("/"):r()});const J=R("notifications",()=>{const s=y([{id:1,type:"info",message:"System initialized successfully",timestamp:new Date(Date.now()-3e5).toISOString(),read:!1},{id:2,type:"warning",message:"Garage Door battery level is low (23%)",timestamp:new Date(Date.now()-9e5).toISOString(),read:!1},{id:3,type:"success",message:"Front Door locked by admin",timestamp:new Date(Date.now()-18e5).toISOString(),read:!0}]),n=I(()=>s.value.filter(i=>!i.read).length);return{notifications:s,unreadCount:n,addNotification:i=>{const a={id:Date.now(),timestamp:new Date().toISOString(),read:!1,...i};s.value.unshift(a)},markAsRead:i=>{const a=s.value.find(m=>m.id===i);a&&(a.read=!0)},markAllAsRead:()=>{s.value.forEach(i=>i.read=!0)},clearNotifications:()=>{s.value=[]}}}),W=(s,n)=>{const r=s.__vccOpts||s;for(const[c,o]of n)r[c]=o;return r},K={class:"navbar is-fixed-top glass-effect",role:"navigation"},Q={class:"navbar-brand"},X={class:"navbar-start"},Y={class:"navbar-end"},Z={class:"navbar-item"},ee={class:"buttons"},te={key:0,class:"tag is-danger is-small ml-1"},se={class:"dropdown-trigger"},oe={__name:"NavBar",setup(s){const n=$(),r=D(),c=J(),o=y(!1),l=y(!1),i=()=>{r.logout(),n.push("/login")},a=()=>{console.log("Toggle notifications")};return(m,e)=>{const u=V("router-link");return h(),E("nav",K,[t("div",Q,[v(u,{class:"navbar-item",to:"/"},{default:w(()=>[...e[2]||(e[2]=[t("i",{class:"fas fa-lock has-text-white"},null,-1),t("span",{class:"has-text-white ml-2 is-size-5 has-text-weight-bold"},"SmartLock",-1)])]),_:1}),t("a",{role:"button",class:A(["navbar-burger has-text-white",{"is-active":o.value}]),onClick:e[0]||(e[0]=d=>o.value=!o.value)},[...e[3]||(e[3]=[t("span",null,null,-1),t("span",null,null,-1),t("span",null,null,-1)])],2)]),t("div",{class:A(["navbar-menu",{"is-active":o.value}])},[t("div",X,[v(u,{class:"navbar-item has-text-white",to:"/"},{default:w(()=>[...e[4]||(e[4]=[t("i",{class:"fas fa-tachometer-alt mr-2"},null,-1),k(" Dashboard ",-1)])]),_:1}),v(u,{class:"navbar-item has-text-white",to:"/locks"},{default:w(()=>[...e[5]||(e[5]=[t("i",{class:"fas fa-key mr-2"},null,-1),k(" Locks ",-1)])]),_:1}),p(r).hasRole("admin")?(h(),C(u,{key:0,class:"navbar-item has-text-white",to:"/users"},{default:w(()=>[...e[6]||(e[6]=[t("i",{class:"fas fa-users mr-2"},null,-1),k(" Users ",-1)])]),_:1})):N("",!0),v(u,{class:"navbar-item has-text-white",to:"/settings"},{default:w(()=>[...e[7]||(e[7]=[t("i",{class:"fas fa-cog mr-2"},null,-1),k(" Settings ",-1)])]),_:1})]),t("div",Y,[t("div",Z,[t("div",ee,[t("button",{class:"button is-small is-outlined is-white",onClick:a},[e[8]||(e[8]=t("i",{class:"fas fa-bell"},null,-1)),p(c).unreadCount>0?(h(),E("span",te,L(p(c).unreadCount),1)):N("",!0)]),t("div",{class:A(["dropdown is-right",{"is-active":l.value}])},[t("div",se,[t("button",{class:"button is-small is-outlined is-white",onClick:e[1]||(e[1]=d=>l.value=!l.value)},[e[9]||(e[9]=t("i",{class:"fas fa-user mr-1"},null,-1)),t("span",null,L(p(r).user?.name),1),e[10]||(e[10]=t("i",{class:"fas fa-angle-down ml-1"},null,-1))])]),t("div",{class:"dropdown-menu"},[t("div",{class:"dropdown-content"},[t("a",{class:"dropdown-item",onClick:i},[...e[11]||(e[11]=[t("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),k(" Logout ",-1)])])])])],2)])])])],2)])}}},ne=W(oe,[["__scopeId","data-v-17f533c9"]]),ae={class:"notification-center"},re={__name:"NotificationCenter",setup(s){return(n,r)=>(h(),E("div",ae))}},ie={id:"app"},le={__name:"App",setup(s){const n=D();return q(()=>{n.checkAuth()}),(r,c)=>(h(),E("div",ie,[p(n).isAuthenticated?(h(),C(ne,{key:0})):N("",!0),t("main",{class:A(["main-content",{"with-navbar":p(n).isAuthenticated}])},[v(p(U))],2),v(re)]))}},O=M(le);O.use(z());O.use(x);O.use(H,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1});O.mount("#app");export{W as _,D as u};
