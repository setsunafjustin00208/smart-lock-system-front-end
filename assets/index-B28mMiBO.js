const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DiH08llH.js","assets/LockGrid-nD65fltL.js","assets/vendor-s0BuhqT6.js","assets/utils-B3c4Ll7F.js","assets/LockGrid-BvGofCZL.css","assets/Dashboard-DmoHAZNJ.css","assets/Login-Sshlytmt.js","assets/Login-C_35MHLB.css","assets/Locks-CzsyyFtK.js","assets/Locks-BRI297nu.css","assets/Users-vP5bXFCq.js","assets/Users-BVivSyMA.css","assets/Settings-Ct3V53Sk.js","assets/Settings-Bh_gv8MI.css"])))=>i.map(i=>d[i]);
import{z as D,A as k,B as P,C as x,D as B,E as T,l as V,c as y,v as g,f as t,y as v,w as h,n as b,b as I,e as A,g as _,u as p,h as O,G as $,R as q,p as U,H as M}from"./vendor-s0BuhqT6.js";import{s as z}from"./utils-B3c4Ll7F.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();const H="modulepreload",j=function(s){return"/smart-lock-system-front-end/"+s},N={},w=function(a,r,u){let o=Promise.resolve();if(r&&r.length>0){let d=function(e){return Promise.all(e.map(c=>Promise.resolve(c).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),n=i?.nonce||i?.getAttribute("nonce");o=d(r.map(e=>{if(e=j(e),e in N)return;N[e]=!0;const c=e.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${f}`))return;const m=document.createElement("link");if(m.rel=c?"stylesheet":H,c||(m.as="script"),m.crossOrigin="",m.href=e,n&&m.setAttribute("nonce",n),document.head.appendChild(m),c)return new Promise((R,C)=>{m.addEventListener("load",R),m.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${e}`)))})}))}function l(i){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=i,window.dispatchEvent(n),!n.defaultPrevented)throw i}return o.then(i=>{for(const n of i||[])n.status==="rejected"&&l(n.reason);return a().catch(l)})},E=D("auth",()=>{const s=k(null),a=k(localStorage.getItem("token")),r=P(()=>!!a.value);return{user:s,token:a,isAuthenticated:r,hasRole:n=>s.value?.role===n||s.value?.role==="admin",login:async n=>new Promise(d=>{setTimeout(()=>{if(n.username==="admin"&&n.password==="admin"){const e={id:1,username:"admin",email:"admin@smartlock.com",role:"admin",name:"System Administrator"},c="mock-jwt-token-"+Date.now();s.value=e,a.value=c,localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(e)),d({success:!0,user:e})}else d({success:!1,message:"Invalid credentials"})},1e3)}),logout:()=>{s.value=null,a.value=null,localStorage.removeItem("token"),localStorage.removeItem("user")},checkAuth:()=>{const n=localStorage.getItem("token"),d=localStorage.getItem("user");n&&d&&(a.value=n,s.value=JSON.parse(d))}}}),F=[{path:"/",name:"Dashboard",component:()=>w(()=>import("./Dashboard-DiH08llH.js"),__vite__mapDeps([0,1,2,3,4,5])),meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:()=>w(()=>import("./Login-Sshlytmt.js"),__vite__mapDeps([6,2,3,7])),meta:{guest:!0}},{path:"/locks",name:"Locks",component:()=>w(()=>import("./Locks-CzsyyFtK.js"),__vite__mapDeps([8,2,1,3,4,9])),meta:{requiresAuth:!0}},{path:"/users",name:"Users",component:()=>w(()=>import("./Users-vP5bXFCq.js"),__vite__mapDeps([10,2,3,11])),meta:{requiresAuth:!0,role:"admin"}},{path:"/settings",name:"Settings",component:()=>w(()=>import("./Settings-Ct3V53Sk.js"),__vite__mapDeps([12,2,3,13])),meta:{requiresAuth:!0}}],L=x({history:B("/smart-lock-system-front-end/"),routes:F});L.beforeEach((s,a,r)=>{const u=E();s.meta.requiresAuth&&!u.isAuthenticated?r("/login"):s.meta.guest&&u.isAuthenticated||s.meta.role&&!u.hasRole(s.meta.role)?r("/"):r()});const G=D("notifications",()=>{const s=k([{id:1,type:"info",message:"System initialized successfully",timestamp:new Date(Date.now()-3e5).toISOString(),read:!1},{id:2,type:"warning",message:"Garage Door battery level is low (23%)",timestamp:new Date(Date.now()-9e5).toISOString(),read:!1},{id:3,type:"success",message:"Front Door locked by admin",timestamp:new Date(Date.now()-18e5).toISOString(),read:!0}]),a=P(()=>s.value.filter(i=>!i.read).length);return{notifications:s,unreadCount:a,addNotification:i=>{const n={id:Date.now(),timestamp:new Date().toISOString(),read:!1,...i};s.value.unshift(n)},markAsRead:i=>{const n=s.value.find(d=>d.id===i);n&&(n.read=!0)},markAllAsRead:()=>{s.value.forEach(i=>i.read=!0)},clearNotifications:()=>{s.value=[]}}}),J=(s,a)=>{const r=s.__vccOpts||s;for(const[u,o]of a)r[u]=o;return r},W={class:"navbar is-fixed-top glass-effect",role:"navigation"},K={class:"navbar-brand"},Q={class:"navbar-start"},X={class:"navbar-end"},Y={class:"navbar-item"},Z={class:"buttons"},ee={key:0,class:"tag is-danger is-small ml-1"},te={class:"dropdown-trigger"},se={__name:"NavBar",setup(s){const a=T(),r=E(),u=G(),o=k(!1),l=k(!1),i=()=>{r.logout(),a.push("/login")},n=()=>{console.log("Toggle notifications")};return(d,e)=>{const c=V("router-link");return g(),y("nav",W,[t("div",K,[v(c,{class:"navbar-item",to:"/"},{default:h(()=>[...e[2]||(e[2]=[t("i",{class:"fas fa-lock has-text-white"},null,-1),t("span",{class:"has-text-white ml-2 is-size-5 has-text-weight-bold"},"SmartLock",-1)])]),_:1}),t("a",{role:"button",class:b(["navbar-burger has-text-white",{"is-active":o.value}]),onClick:e[0]||(e[0]=f=>o.value=!o.value)},[...e[3]||(e[3]=[t("span",null,null,-1),t("span",null,null,-1),t("span",null,null,-1)])],2)]),t("div",{class:b(["navbar-menu",{"is-active":o.value}])},[t("div",Q,[v(c,{class:"navbar-item has-text-white",to:"/"},{default:h(()=>[...e[4]||(e[4]=[t("i",{class:"fas fa-tachometer-alt mr-2"},null,-1),_(" Dashboard ",-1)])]),_:1}),v(c,{class:"navbar-item has-text-white",to:"/locks"},{default:h(()=>[...e[5]||(e[5]=[t("i",{class:"fas fa-key mr-2"},null,-1),_(" Locks ",-1)])]),_:1}),p(r).hasRole("admin")?(g(),I(c,{key:0,class:"navbar-item has-text-white",to:"/users"},{default:h(()=>[...e[6]||(e[6]=[t("i",{class:"fas fa-users mr-2"},null,-1),_(" Users ",-1)])]),_:1})):A("",!0),v(c,{class:"navbar-item has-text-white",to:"/settings"},{default:h(()=>[...e[7]||(e[7]=[t("i",{class:"fas fa-cog mr-2"},null,-1),_(" Settings ",-1)])]),_:1})]),t("div",X,[t("div",Y,[t("div",Z,[t("button",{class:"button is-small is-outlined is-white",onClick:n},[e[8]||(e[8]=t("i",{class:"fas fa-bell"},null,-1)),p(u).unreadCount>0?(g(),y("span",ee,O(p(u).unreadCount),1)):A("",!0)]),t("div",{class:b(["dropdown is-right",{"is-active":l.value}])},[t("div",te,[t("button",{class:"button is-small is-outlined is-white",onClick:e[1]||(e[1]=f=>l.value=!l.value)},[e[9]||(e[9]=t("i",{class:"fas fa-user mr-1"},null,-1)),t("span",null,O(p(r).user?.name),1),e[10]||(e[10]=t("i",{class:"fas fa-angle-down ml-1"},null,-1))])]),t("div",{class:"dropdown-menu"},[t("div",{class:"dropdown-content"},[t("a",{class:"dropdown-item",onClick:i},[...e[11]||(e[11]=[t("i",{class:"fas fa-sign-out-alt mr-2"},null,-1),_(" Logout ",-1)])])])])],2)])])])],2)])}}},oe=J(se,[["__scopeId","data-v-17f533c9"]]),ne={class:"notification-center"},ae={__name:"NotificationCenter",setup(s){return(a,r)=>(g(),y("div",ne))}},re={id:"app"},ie={__name:"App",setup(s){const a=E();return $(()=>{a.checkAuth()}),(r,u)=>(g(),y("div",re,[p(a).isAuthenticated?(g(),I(oe,{key:0})):A("",!0),t("main",{class:b(["main-content",{"with-navbar":p(a).isAuthenticated}])},[v(p(q))],2),v(ae)]))}},S=U(ie);S.use(M());S.use(L);S.use(z,{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1});S.mount("#app");export{J as _,E as u};
