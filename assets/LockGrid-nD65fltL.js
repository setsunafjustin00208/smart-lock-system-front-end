import{z as p,A as v,B as c,c as d,v as u,f as o,n as r,h as k,e as S,F as I,k as C,y as x}from"./vendor-s0BuhqT6.js";import{u as A,f as O}from"./utils-B3c4Ll7F.js";import{_ as D}from"./index-B28mMiBO.js";const E=p("locks",()=>{const s=A(),t=v([{id:1,name:"Front Door",location:"Main Entrance",isLocked:!0,status:"online",batteryLevel:85,lastActivity:new Date(Date.now()-7200*1e3).toISOString(),hardwareId:"ESP32-001"},{id:2,name:"Back Door",location:"Garden Entrance",isLocked:!1,status:"online",batteryLevel:92,lastActivity:new Date(Date.now()-1800*1e3).toISOString(),hardwareId:"ESP32-002"},{id:3,name:"Garage Door",location:"Garage",isLocked:!0,status:"offline",batteryLevel:23,lastActivity:new Date(Date.now()-1440*60*1e3).toISOString(),hardwareId:"ESP32-003"},{id:4,name:"Office Door",location:"Home Office",isLocked:!1,status:"online",batteryLevel:67,lastActivity:new Date(Date.now()-300*1e3).toISOString(),hardwareId:"ESP32-004"}]),n=v(!1),a=v(null),m=c(()=>t.value.filter(e=>e.status==="online")),y=c(()=>t.value.filter(e=>e.status==="offline")),L=c(()=>t.value.filter(e=>e.isLocked).length),h=c(()=>t.value.filter(e=>!e.isLocked).length),b=c(()=>t.value.filter(e=>e.batteryLevel<30)),_=async e=>{const l=t.value.find(i=>i.id===e);if(l){if(l.status==="offline"){s.error("Cannot control offline lock");return}n.value=!0;try{await new Promise(w=>setTimeout(w,1500)),l.isLocked=!l.isLocked,l.lastActivity=new Date().toISOString();const i=l.isLocked?"locked":"unlocked";s.success(`${l.name} ${i} successfully`),setTimeout(()=>{f(e,{lastActivity:new Date().toISOString()})},500)}catch(i){a.value=i.message,s.error("Failed to control lock")}finally{n.value=!1}}},f=(e,l)=>{const i=t.value.find(w=>w.id===e);i&&Object.assign(i,l)};return{locks:t,loading:n,error:a,onlineLocks:m,offlineLocks:y,lockedCount:L,unlockedCount:h,lowBatteryLocks:b,toggleLock:_,updateLockStatus:f,startRealTimeUpdates:()=>{setInterval(()=>{if(t.value.forEach(e=>{Math.random()<.1&&(e.batteryLevel=Math.max(0,e.batteryLevel-Math.floor(Math.random()*2)))}),Math.random()<.05){const e=t.value[Math.floor(Math.random()*t.value.length)];e.status=e.status==="online"?"offline":"online",e.status==="offline"?s.warning(`${e.name} went offline`):s.success(`${e.name} is back online`)}},1e4)}}}),M={class:"card-content"},$={class:"lock-header"},B={class:"lock-icon-container"},T={class:"lock-info"},G={class:"lock-name"},N={class:"lock-location"},P={class:"battery-display"},z={class:"battery-text"},F={class:"lock-action"},U=["disabled"],V={key:0,class:"loading-spinner"},j={class:"lock-footer"},q={class:"last-activity"},R={__name:"LockCard",props:{lock:{type:Object,required:!0}},setup(s){const t=s,n=E(),a=v(!1),m=c(()=>({"lock-card--locked":t.lock.isLocked&&t.lock.status==="online","lock-card--unlocked":!t.lock.isLocked&&t.lock.status==="online","lock-card--offline":t.lock.status==="offline"})),y=c(()=>({"lock-icon--locked":t.lock.isLocked&&t.lock.status==="online","lock-icon--unlocked":!t.lock.isLocked&&t.lock.status==="online","lock-icon--offline":t.lock.status==="offline"})),L=c(()=>({"status-indicator--online":t.lock.status==="online","status-indicator--offline":t.lock.status==="offline"})),h=c(()=>({"battery-high":t.lock.batteryLevel>50,"battery-medium":t.lock.batteryLevel>20&&t.lock.batteryLevel<=50,"battery-low":t.lock.batteryLevel<=20})),b=c(()=>({"action-button--lock":!t.lock.isLocked&&t.lock.status==="online","action-button--unlock":t.lock.isLocked&&t.lock.status==="online","action-button--disabled":t.lock.status==="offline"})),_=async()=>{a.value=!0;try{await n.toggleLock(t.lock.id)}finally{a.value=!1}},f=g=>O(new Date(g),{addSuffix:!0});return(g,e)=>(u(),d("div",{class:r(["card lock-card animate-slide-in",m.value])},[o("div",M,[o("div",$,[o("div",B,[o("i",{class:r(["fas fa-lock lock-icon",y.value])},null,2),o("div",{class:r(["status-indicator",L.value])},null,2)]),o("div",T,[o("h3",G,k(s.lock.name),1),o("p",N,k(s.lock.location),1)]),o("div",P,[o("i",{class:r(["fas fa-battery",h.value])},null,2),o("span",z,k(s.lock.batteryLevel)+"%",1)])]),o("div",F,[o("button",{class:r(["action-button",b.value]),onClick:_,disabled:a.value||s.lock.status==="offline"},[o("i",{class:r(s.lock.isLocked?"fas fa-unlock":"fas fa-lock")},null,2),o("span",null,k(s.lock.isLocked?"Unlock":"Lock"),1),a.value?(u(),d("div",V)):S("",!0)],10,U)]),o("div",j,[o("span",q,k(f(s.lock.lastActivity)),1)])])],2))}},H=D(R,[["__scopeId","data-v-9fb82a42"]]),J={class:"lock-grid"},K={class:"columns is-multiline"},Q={key:0,class:"has-text-centered py-6"},W={__name:"LockGrid",props:{locks:{type:Array,required:!0}},setup(s){return(t,n)=>(u(),d("div",J,[o("div",K,[(u(!0),d(I,null,C(s.locks,a=>(u(),d("div",{key:a.id,class:"column is-12-mobile is-6-tablet is-4-desktop is-3-widescreen"},[x(H,{lock:a},null,8,["lock"])]))),128))]),s.locks.length===0?(u(),d("div",Q,[...n[0]||(n[0]=[o("i",{class:"fas fa-lock is-size-1 has-text-white-ter mb-4"},null,-1),o("p",{class:"has-text-white-ter is-size-5"},"No locks found",-1),o("p",{class:"has-text-white-ter"},"Add your first smart lock to get started",-1)])])):S("",!0)]))}},tt=D(W,[["__scopeId","data-v-e482f460"]]);export{tt as L,E as u};
